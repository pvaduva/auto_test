WASSP_WORKSPACE_HOME=/home/jjia/wassp-repos/Workspace
WASSP_USER_CONFIG_FILE=/home/jjia/.wassp/wasspuserconfig.ini
GNOME_KEYRING_PID=2285
WASSP_TESTRUN_WC_FILE=/home/jjia/wassp-repos/Logs/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/testRunWorkingCopy.xml
USER=jjia
LANGUAGE=en_CA:en
WASSP_VSB_BASE=/home/jjia/wassp-repos/Workspace/vsb
PUBLIC_ROUTER=tenant1-router
noseTestTimeout=1000
WASSP_TC_NAME=test_us49035_ts4_vcpu_scale_up_down
WASSP_TC_USER_LOG=/home/jjia/wassp-repos/Logs/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/user
HOST_IP=128.224.252.2
XDG_SEAT=seat0
WASSP_NEST_BASE=/home/jjia/wassp-repos/wassp-nest
TEXTDOMAIN=im-config
SSH_AGENT_PID=2375
COMPIZ_CONFIG_PROFILE=ubuntu
SESSION=ubuntu
LD_LIBRARY_PATH=/home/jjia/wassp-repos/.venv_wassp/lib:
SHLVL=3
WRSPASS=li69nux
QT4_IM_MODULE=xim
HOME=/home/jjia
WASSP_PRODUCT_NAME=cgcs
WASSP_TC_RUN_LOG=/home/jjia/wassp-repos/Logs/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/
DESKTOP_SESSION=ubuntu
wrift_synchronisation_tag=B0E1R0
XDG_SEAT_PATH=/org/freedesktop/DisplayManager/Seat0
GTK_MODULES=overlay-scrollbar:unity-gtk-module
WASSP_WIND_HOME=/WindRiver
_wr_htee_execDir=/home/jjia/wassp-repos/wassp/host/htee
PS1=(.venv_wassp) 
WASSP_CONFIG_BASE=/home/jjia/wassp-repos/systems
INSTANCE=
WASSP_DATA_BASE=/home/jjia/wassp-repos/wassp-data
WASSP_TESTMATRIX_BASE=/home/jjia/wassp-repos/testmatrices
testCaseId=us49035_ts4
DBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-aqf20KfIDP
LOADPATH=${LP}
COLORTERM=gnome-terminal
WASSP_LOGS_HOME=/home/jjia/wassp-repos/Logs
UBUNTU_MENUPROXY=1
GNOME_KEYRING_CONTROL=/run/user/19059/keyring-YEpf6D
WASSP_LOGGING_OPTIONS=all
WRSUSER=wrsroot
QT_QPA_PLATFORMTHEME=appmenu-qt5
MANDATORY_PATH=/usr/share/gconf/ubuntu.mandatory.path
IM_CONFIG_PHASE=1
SESSIONTYPE=gnome-session
BUILDSDIR=/localdisk/loadbuild/jenkins/CGCS_1.0_Unified_Daily_Build
WASSP_TC_PATH=/home/jjia/wassp-repos/testcases/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down/test_us49035_ts4_vcpu_scale_up_down
WASSP_TARGET_LOGS={'Com1': ['/home/jjia/wassp-repos/Logs/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/target_21770.Com1_B0E1R0_20150205_161254.log'], 'Com2': ['/home/jjia/wassp-repos/Logs/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/target_21771.Com2_B0E1R0_20150205_161254.log'], 'Con1': ['/home/jjia/wassp-repos/Logs/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/target_21768.Con1_B0E1R0_20150205_161254.log'], 'Con2': ['/home/jjia/wassp-repos/Logs/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/target_21769.Con2_B0E1R0_20150205_161254.log'], 'SHELL': ['/home/jjia/wassp-repos/Logs/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/target_host:localshell.SHELL_B0E1R0_20150205_161254.log'], 'Con1SSH': ['/home/jjia/wassp-repos/Logs/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/target_21768.Con1SSH_B0E1R0_20150205_161254.log']}
GTK_IM_MODULE=ibus
LOGNAME=jjia
wrift_htee_data_file=/tmp/tmp4ecs4v.tmp
WINDOWID=98566155
_=/home/jjia/wassp-repos/.venv_wassp/bin/python3
DEFAULTS_PATH=/usr/share/gconf/ubuntu.default.path
WASSP_RUNTIMECONFIGS_BASE=/home/jjia/wassp-repos/runtimeconfigs/cgcs
WASSP_SYSTEMS_RUNTIMECONFIGS_BASE=/home/jjia/wassp-repos/systems/cgcs/runtimeconfigs/cgcs2.0/sprint/us49035_vcpu_scale_up_down
TERM=xterm
XDG_SESSION_ID=c3
WASSP_LOCAL_CONFIG_DIR=/home/jjia/.wassp
GNOME_DESKTOP_SESSION_ID=this-is-deprecated
WASSP_TESTCASE_BASE=/home/jjia/wassp-repos/testcases/cgcs
WASSP_TARGET_CONTROL_FILES_DIR=/home/jjia/wassp-repos/wassp-data/Data
PATH=/home/jjia/wassp-repos/.venv_wassp/bin:/home/jjia/wassp-repos/wassp-nest/tools/bin:/home/jjia/wassp-repos/wassp/host/tools/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
GDM_LANG=en_CA
SELINUX_INIT=YES
SESSION_MANAGER=local/yow-jjia-lx:@/tmp/.ICE-unix/2445,unix/yow-jjia-lx:/tmp/.ICE-unix/2445
XDG_MENU_PREFIX=gnome-
XDG_RUNTIME_DIR=/run/user/19059
XDG_SESSION_PATH=/org/freedesktop/DisplayManager/Session0
WASSP_CONSOLELOGS_BASE=/home/jjia/wassp-repos/Logs/consolelogs
DISPLAY=:0
COMPIZ_BIN_PATH=/usr/bin/
WASSP_SYSTEMS_BASE=/home/jjia/wassp-repos/systems/cgcs
BUILDSERVER=${BS}
WASSP_BASE=/home/jjia/wassp-repos/wassp/host
LANG=en_CA.UTF-8
XDG_CURRENT_DESKTOP=Unity
XAUTHORITY=/folk/jjia/.Xauthority
XMODIFIERS=@im=ibus
WASSP_TESTRUN_FILE=/home/jjia/wassp-repos/Logs/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/testRun.xml
XDG_GREETER_DATA_DIR=/var/lib/lightdm-data/jjia
SSH_AUTH_SOCK=/run/user/19059/keyring-YEpf6D/ssh
SSH_AGENT_LAUNCHER=upstart
CGCS_TEST_DIR=/home/jjia/wassp-repos
SHELL=/bin/bash
GDMSESSION=ubuntu
WASSP_CONFIG_DIR=/home/jjia/wassp-repos/systems/cgcs/platforms/cgcs2.0/sprint/us49035_vcpu_scale_up_down
WASSP_TESTMATRIX_DIR=/home/jjia/wassp-repos/testmatrices/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down
CGCS_BUILD=2015-01-18_22-05-32-scale_up_down
WASSP_PYTHON_HOME=/home/jjia/wassp-repos/.venv_wassp/bin/python3
UPSTART_SESSION=unix:abstract=/com/ubuntu/upstart-session/19059/2297
GPG_AGENT_INFO=/run/user/19059/keyring-YEpf6D/gpg:0:1
TEXTDOMAINDIR=/usr/share/locale/
VIRTUAL_ENV=/home/jjia/wassp-repos/.venv_wassp
QT_IM_MODULE=ibus
XDG_VTNR=7
PWD=/home/jjia/wassp-repos/testcases/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down/test_us49035_ts4_vcpu_scale_up_down
WASSP_TDK_BASE=/home/jjia/wassp-repos/target
WASSP_SYSTEMS_TOPOLOGIES_BASE=/home/jjia/wassp-repos/systems/cgcs/topologies/cgcs2.0/sprint/us49035_vcpu_scale_up_down
XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/usr/share/upstart/xdg:/etc/xdg
CLUTTER_IM_MODULE=xim
XDG_DATA_DIRS=/usr/share/ubuntu:/usr/share/gnome:/usr/local/share/:/usr/share/
WASSP_SYSTEMS_PLATFORMS_BASE=/home/jjia/wassp-repos/systems/cgcs/platforms/cgcs2.0/sprint/us49035_vcpu_scale_up_down
WRSDIR=/home/wrsroot
WASSP_TC_USER_WORKSPACE=/home/jjia/wassp-repos/Workspace/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/user
WASSP_RUNTIMECONFIGS_DIR=/home/jjia/wassp-repos/runtimeconfigs/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down
GUESTPATH=${GP}
DBREPORT_SWITCH=True
PUBLIC_NETWORK=tenant1-net1
WASSP_FEATURE_DIR=cgcs2.0/sprint/us49035_vcpu_scale_up_down
WASSP_SYSTEMS_HOME=/home/jjia/wassp-repos/systems
VTE_VERSION=3409
WASSP_HOME=/home/jjia/wassp-repos
WRSPASSORIG=wrsroot
JOB=dbus
WASSP_TESTCASE_DIR=/home/jjia/wassp-repos/testcases/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down
hteeCleanWorkDir=True
WASSP_TC_RUN_WORKSPACE=/home/jjia/wassp-repos/Workspace/hp380/CGCS_2Cont_2Comp/test_us49035_ts4_vcpu_scale_up_down/
Const: HOST_IP = 128.224.150.199
[0;32m
expect-lite directive: *NOINTERACT [0m
[0;33mWarning: Remote Host=none, using Localhost[0m
spawn bash
 

jjia@yow-jjia-lx:~/wassp-repos/testcases/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down/test_us49035_ts4_vcpu_scale_up_down$  

PS1="[\u@\h:\w]\$ "
[0;32m
expect-lite directive: *NOFAIL [0m
[0;32m
expect-lite directive: *EXP_INFO [0m

jjia@yow-jjia-lx:~/wassp-repos/testcases/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down/test_us49035_ts4_vcpu_scale_up_down$ 
jjia@yow-jjia-lx:~/wassp-repos/testcases/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down/test_us49035_ts4_vcpu_scale_up_down$ 
jjia@yow-jjia-lx:~/wassp-repos/testcases/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down/test_us49035_ts4_vcpu_scale_up_down$ PS1="[\u@\h:\w]\$ "
[jjia@yow-jjia-lx:~/wassp-repos/testcases/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down/test_us49035_ts4_vcpu_scale_up_down]$ 
[jjia@yow-jjia-lx:~/wassp-repos/testcases/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down/test_us49035_ts4_vcpu_scale_up_down]$ date +%F_%T
2015-02-05_11:13:33
[jjia@yow-jjia-lx:~/wassp-repos/testcases/cgcs/cgcs2.0/sprint/us49035_vcpu_scale_up_down/test_us49035_ts4_vcpu_scale_up_down]$ [0;32m
Assigned Var:DATE=2015-02-05_11:13:33 
[0m
[0;32m

Setting Expect Timeout to: 2 

[0m
[0;32mINFO: CONST FOUND: HOST_IP = 128.224.150.199[0m
[1;34m
 === connecting to controller
[0m
ssh -X -o UserKnownHostsFIle=/dev/null -o Stric tHostKeyChecking=no wrsroot@128.224.150.199
ssh: /home/jjia/wassp-repos/.venv_wassp/lib/libcrypto.so.1.0.0: no version information available (required by ssh)
ssh: /home/jjia/wassp-repos/.venv_wassp/lib/libcrypto.so.1.0.0: no version information available (required by ssh)
Warning: Permanently added '128.224.150.199' (ECDSA) to the list of known hosts.
Wind River Linux 5.0.1.0
------------------------------------------------------------------------
W A R N I N G *** W A R N I N G *** W A R N I N G *** W A R N I N G *** 
------------------------------------------------------------------------
THIS IS A PRIVATE COMPUTER SYSTEM.
This computer system including all related equipment, network devices
(specifically including Internet access), are provided only for authorized use.
All computer systems may be monitored for all lawful purposes, including to
ensure that their use is authorized, for management of the system, to
facilitate protection against unauthorized access, and to verify security
procedures, survivability and operational security. Monitoring includes active
attacks by authorized personnel and their entities to test or verify the
security of the system. During monitoring, information may be examined,
recorded, copied and used for authorized purposes. All information including
personal information, placed on or sent over this system may be monitored. Uses
of this system, authorized or unauthorized, constitutes consent to monitoring
of this system. Unauthorized use may subject you to criminal prosecution.
Evidence of any such unauthorized use collected during monitoring may be used
for administrative, criminal or other adverse action. Use of this system
constitutes consent to monitoring for these purposes.

Password: [0;32m<ssword:[0m

Warning: No xauth data; using fake authentication data for X11 forwarding.
X11 forwarding request failed on channel 0
Last login: Thu Feb  5 16:12:47 2015 from 128.224.144.162
[H[2J
WARNING: Unauthorized access to this system is forbidden and will be
prosecuted by law. By accessing this system, you agree that your
actions may be monitored if unauthorized usage is suspected.


====================================================================
         SYSTEM: yow-cgcs-hp380-1_4
====================================================================

Thu Feb  5 16:13:21 UTC 2015
controller-0:~$ export TMOUT=0
Thu Feb  5 16:13:21 UTC 2015
controller-0:~$ [1;34m
 === become admin
[0m
source /etc/nova/openrc
Thu Feb  5 16:13:21 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === show version
[0m
system show
+------------------+-------------------------------------------+
| Property         | Value                                     |
+------------------+-------------------------------------------+
| name             | yow-cgcs-hp380-1_4                        |
| description      | yow-cgcs-hp380-1_4: setup by lab_setup.sh |
| location         | None                                      |
| contact          | None                                      |
| software_version | 14.10 3.4.103-ovp-ga2-rt120-r5_standard   |
| uuid             | 447008ec-d4cb-443e-abfc-abc15fa7bc05      |
| created_at       | 2015-02-04T02:28:21.217852+00:00          |
| updated_at       | 2015-02-05T16:12:51.608154+00:00          |
+------------------+-------------------------------------------+
Thu Feb  5 16:13:22 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ cat /etc/build.info
###
### Wind River Titanium Server
###     Release 14.10
###
###     Wind River Systems, Inc.
###

SW_VERSION="14.10"
BUILD_TARGET="Host Installer"
BUILD_TYPE="Formal"
BUILD_ID="2015-01-18_21-04-50"

JOB="CGCS_1.0_Unified_Daily_Build"
BUILD_BY="jenkins"
BUILD_NUMBER="471"
BUILD_HOST="yow-cgts2-lx"
BUILD_DATE="2015-01-18 21:04:53 -0500"
Thu Feb  5 16:13:22 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === show system status
[0m
nova service-list
+------------------+--------------+----------+---------+------------+-------+----------------------------+-----------------+
| Binary           | Host         | Zone     | Status  | Maint Mode | State | Updated_at                 | Disabled Reason |
+------------------+--------------+----------+---------+------------+-------+----------------------------+-----------------+
| nova-scheduler   | controller-1 | internal | enabled | disabled   | down  | 2015-02-05T16:11:19.115227 | -               |
| nova-consoleauth | controller-1 | internal | enabled | disabled   | down  | 2015-02-05T16:11:19.138663 | -               |
| nova-cert        | controller-1 | internal | enabled | disabled   | down  | 2015-02-05T16:11:19.153267 | -               |
| nova-compute     | compute-1    | nova     | enabled | disabled   | up    | 2015-02-05T16:13:19.667905 | -               |
| nova-conductor   | controller-0 | internal | enabled | disabled   | up    | 2015-02-05T16:13:21.313504 | -               |
| nova-conductor   | controller-1 | internal | enabled | disabled   | down  | 2015-02-05T16:11:29.108718 | -               |
| nova-scheduler   | controller-0 | internal | enabled | disabled   | up    | 2015-02-05T16:13:21.363501 | -               |
| nova-cert        | controller-0 | internal | enabled | disabled   | up    | 2015-02-05T16:13:21.369780 | -               |
| nova-consoleauth | controller-0 | internal | enabled | disabled   | up    | 2015-02-05T16:13:21.419712 | -               |
| nova-compute     | compute-0    | nova     | enabled | disabled   | up    | 2015-02-05T16:13:18.155000 | -               |
+------------------+--------------+----------+---------+------------+-------+----------------------------+-----------------+
Thu Feb  5 16:13:23 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === validate that controllers and computes are present
[0m
system host-list
+----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabled     | available    |
| 4  | compute-1    | compute     | unlocked       | enabled     | available    |
+----+--------------+-------------+----------------+-------------+--------------+
[0;32m<controller-0[0m
[0;32m<controller-1[0m
[0;32m<compute-0[0m
[0;32m<compute-1[0m
Thu Feb  5 16:13:24 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:last_compute=compute
[0m
[0;32m
If: expr { "compute" != "compute" } |then   [|result=FALSE
[0m
[1;34m
 === Do valid lab_Setup
[0m
[0;32m
If: expr { "yes" == "yes" } |then   [|result=TRUE
[0m
[1;34m
 === validate lab_setup script
[0m
ls lab_setup.sh
lab_setup.sh
Thu Feb  5 16:13:24 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m<
lab_setup.sh[0m
ls lab_setup.conf
lab_setup.conf
Thu Feb  5 16:13:24 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m<
lab_setup.conf[0m
[1;34m
 === use lab_setup to configure compute nodes, interfaces, provider networks, tenant networks, images, flavors. Ready to boot VMs
[0m
[0;32m

Setting Expect Timeout to: 600 

[0m
time ./lab_setup.sh
Checking for required files
Setting system name
+------------------+-------------------------------------------+
| Property         | Value                                     |
+------------------+-------------------------------------------+
| name             | yow-cgcs-hp380-1_4                        |
| description      | yow-cgcs-hp380-1_4: setup by lab_setup.sh |
| location         | None                                      |
| contact          | None                                      |
| software_version | 14.10 3.4.103-ovp-ga2-rt120-r5_standard   |
| uuid             | 447008ec-d4cb-443e-abfc-abc15fa7bc05      |
| created_at       | 2015-02-04T02:28:21.217852+00:00          |
| updated_at       | 2015-02-05T16:12:51.608154+00:00          |
+------------------+-------------------------------------------+
Adding tenants
Adding tenant credentials
Adding tenant quotas
+---------------------+-------+
| Field               | Value |
+---------------------+-------+
| floatingip          | 50    |
| network             | 5     |
| port                | 19    |
| router              | 10    |
| security_group      | 10    |
| security_group_rule | 100   |
| subnet              | 5     |
+---------------------+-------+
ERROR (BadRequest): Quota value 6 for cores are greater than already used and reserved 7 (HTTP 400) (Request-ID: req-22b0aefc-68b8-4e90-a56a-cf66de05d3a5)

real	0m13.230s
user	0m7.626s
sys	0m1.577s
[0;32m<
real[0m
[0;32m

Setting Expect Timeout to: 10 

[0m
Thu Feb  5 16:13:38 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === unlock computes
[0m
system host-unlock compute-0
Avoiding 'unlock' action on already 'unlocked' host compute-0
Thu Feb  5 16:13:39 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ system host-unlock compute-1
Avoiding 'unlock' action on already 'unlocked' host compute-1
Thu Feb  5 16:13:40 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ system host-list | grep compute-1
| 4  | compute-1    | compute     | unlocked       | enabled     | available    |
Thu Feb  5 16:13:41 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:avail=available
[0m
[0;32m
While: expr { "available" != "available" } |result=FALSE
[0m
system host-list
+----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabled     | available    |
| 4  | compute-1    | compute     | unlocked       | enabled     | available    |
+----+--------------+-------------+----------------+-------------+--------------+
Thu Feb  5 16:13:42 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === Create necessary flavors and set minimum vcpu value
[0m
nova flavor-create --dedicated-cpus True vcpu4-1 5f0d748b-1c8b-4a70-1985-4d57e25ac137 512 0 4
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
| ID                                   | Name    | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | VCPU_Model |
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
| 5f0d748b-1c8b-4a70-1985-4d57e25ac137 | vcpu4-1 | 512       | 0    | 0         |      | 4     | 1.0         | True      | -          |
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
Thu Feb  5 16:13:44 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ echo $?
0
Thu Feb  5 16:13:44 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m<
0[0m
nova flavor-create --dedicated-cpus True vcpu5-2 db9b37f5-cba5-1985-a264-a6c1375a4ff7 512 0 5
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
| ID                                   | Name    | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | VCPU_Model |
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
| db9b37f5-cba5-1985-a264-a6c1375a4ff7 | vcpu5-2 | 512       | 0    | 0         |      | 5     | 1.0         | True      | -          |
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
Thu Feb  5 16:13:45 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ echo $?
0
Thu Feb  5 16:13:45 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m<
0[0m
[1;34m
 === flavor created
[0m
nova flavor-list | grep vcpu4-1
| 5f0d748b-1c8b-4a70-1985-4d57e25ac137 | vcpu4-1                               | 512       | 0    | 0         |      | 4     | 1.0         | True      | -           |
Thu Feb  5 16:13:46 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ nova flavor-list | grep vcpu5-2
| db9b37f5-cba5-1985-a264-a6c1375a4ff7 | vcpu5-2                               | 512       | 0    | 0         |      | 5     | 1.0         | True      | -           |
Thu Feb  5 16:13:47 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === set minimum value for the cpu created
[0m
nova flavor-key vcpu4-1 set wrs:min_vcpus=1 
Thu Feb  5 16:13:48 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ nova flavor-list --extra-specs | grep vcpu4-1
| 5f0d748b-1c8b-4a70-1985-4d57e25ac137 | vcpu4-1                               | 512       | 0    | 0         |      | 4     | 1.0         | True      | -           | {u'dedicated:cpus': u'True', u'guest:heartbeat': u'False', u'wrs:min_vcpus': u'1'} |
Thu Feb  5 16:13:49 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:result=1
[0m
[1;34m
 === Minimum CPU value set for vcpu4-1 is 1
[0m
nova flavor-key vcpu5-2 set wrs:min_vcpus=2
Thu Feb  5 16:13:50 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ nova flavor-list --extra-specs | grep vcpu5-2
| db9b37f5-cba5-1985-a264-a6c1375a4ff7 | vcpu5-2                               | 512       | 0    | 0         |      | 5     | 1.0         | True      | -           | {u'dedicated:cpus': u'True', u'guest:heartbeat': u'False', u'wrs:min_vcpus': u'2'} |
Thu Feb  5 16:13:51 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:result=2
[0m
[1;34m
 === Minimum CPU value set for vcpu5-2 is 2
[0m
[1;34m
 === get tenant uuids
[0m
keystone tenant-list
+----------------------------------+----------+---------+
|                id                |   name   | enabled |
+----------------------------------+----------+---------+
| 1e17286a61104702bc2a3b6ef5467af9 |  admin   |   True  |
| a318972360584e319782fcc2282c8bee | services |   True  |
| a4e3a58f85e344c9b238f99045ee9e4e | tenant1  |   True  |
| e2a088214fe747c59a24256d3e02eb7f | tenant2  |   True  |
+----------------------------------+----------+---------+
[0;32m<name[0m
Thu Feb  5 16:13:52 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:tenant_uuid=a4e3a58f85e344c9b238f99045ee9e4e
[0m
[1;34m
 === get tenant id
[0m
keystone user-list
+----------------------------------+------------+---------+----------------------+
|                id                |    name    | enabled |        email         |
+----------------------------------+------------+---------+----------------------+
| 5889d8c0e6274cb3923e9aac43d216c3 |   admin    |   True  |   admin@localhost    |
| db6f987048614bfeaa580cdd9f9baa7e | ceilometer |   True  | ceilometer@localhost |
| 4ed222a140204e6fa5a5f17af72f1877 |   cinder   |   True  |   cinder@localhost   |
| c992eed28b814f998e67dbc4322ee138 |   glance   |   True  |   glance@localhost   |
| 92b10c41dcae4a6280ab675c657a1e4a |    heat    |   True  |    heat@localhost    |
| b2e344598b624f12ab516d300556f71a |  neutron   |   True  |  neutron@localhost   |
| 6425a7a5c9b54761a81aaa71a18de55e |    nova    |   True  |    nova@localhost    |
| c550b3e687544b4c9a90380754ac659f |  patching  |   True  |  patching@localhost  |
| 1a105c6520364f29b40e8a01a8ae2ff3 | power_mgmt |   True  | power_mgmt@localhost |
| bd504f2f6f254d5f9d075cd079926ada |   sysinv   |   True  |   sysinv@localhost   |
| 49be897e674a4456af937371ecfa936d |  tenant1   |   True  | tenant1@noreply.com  |
| 52389e4935fc49f39699d21cd188dc09 |  tenant2   |   True  | tenant2@noreply.com  |
+----------------------------------+------------+---------+----------------------+
Thu Feb  5 16:13:52 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ keystone user-list | grep tenant1
| 49be897e674a4456af937371ecfa936d |  tenant1   |   True  | tenant1@noreply.com  |
Thu Feb  5 16:13:53 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:tenant_user_id=49be897e674a4456af937371ecfa936d
[0m
[1;34m
 === increase quotas for test
[0m
nova quota-update --instances 30 a4e3a58f85e344c9b238f99045ee9e4e
Thu Feb  5 16:13:54 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ nova quota-update --cores 60 a4e3a58f85e344c9b238f99045ee9e4e
Thu Feb  5 16:13:55 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ nova quota-show --tenant a4e3a58f85e344c9b238f99045ee9e4e
+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 30    |
| cores                       | 60    |
| ram                         | 51200 |
| floating_ips                | 3     |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
+-----------------------------+-------+
Thu Feb  5 16:13:56 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ neutron quota-update --port 60 --tenant-id a4e3a58f85e344c9b238f99045ee9e4e
+---------------------+-------+
| Field               | Value |
+---------------------+-------+
| floatingip          | 50    |
| network             | 5     |
| port                | 60    |
| router              | 10    |
| security_group      | 10    |
| security_group_rule | 100   |
| subnet              | 5     |
+---------------------+-------+
Thu Feb  5 16:13:57 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ cinder quota-update --volumes 30 a4e3a58f85e344c9b238f99045ee9e4e
Thu Feb  5 16:13:58 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ cinder quota-show a4e3a58f85e344c9b238f99045ee9e4e
+-----------+-------+
|  Property | Value |
+-----------+-------+
| gigabytes |  1000 |
| snapshots |   3   |
|  volumes  |   30  |
+-----------+-------+
Thu Feb  5 16:13:59 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === switch to tenant mode
[0m
source /home/wrsroot/openrc.tenant1
Thu Feb  5 16:13:59 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [1;34m
 === copy heat template to /home/wrsroot/ 
[0m
find . -iname VMAutoScaling.yaml
./VMAutoScaling.yaml
./wrs-heat-templates-1.1.0/hot/scenarios/VMAutoScaling.yaml
./heat/product/hot/scenarios/VMAutoScaling.yaml
./heat/hot/scenarios/VMAutoScaling.yaml
./heat/wrs-heat-templates-1.1.0/hot/scenarios/VMAutoScaling.yaml
Thu Feb  5 16:13:59 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:result= ./wrs-heat-templates-1.1.0/hot/scenarios/VMAutoScaling.yaml
[0m
cp  ./wrs-heat-templates-1.1.0/hot/scenarios/VMAutoScaling.yaml .
Thu Feb  5 16:13:59 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [1;34m
 === change the cool down period to 20 secs from 60 secs
[0m
sed -i "s/Cooldown: '60'/Cooldown: '20'/g" VMAutoScaling.yaml
Thu Feb  5 16:13:59 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
While: expr { "1" <= "10" } |result=TRUE
[0m
[0;32m
While: expr { "2" <= "10" } |result=TRUE
[0m
[0;32m
While: expr { "3" <= "10" } |result=TRUE
[0m
[0;32m
While: expr { "4" <= "10" } |result=TRUE
[0m
[0;32m
While: expr { "5" <= "10" } |result=TRUE
[0m
[0;32m
While: expr { "6" <= "10" } |result=TRUE
[0m
[0;32m
While: expr { "7" <= "10" } |result=TRUE
[0m
[0;32m
While: expr { "8" <= "10" } |result=TRUE
[0m
[0;32m
While: expr { "9" <= "10" } |result=TRUE
[0m
[0;32m
While: expr { "10" <= "10" } |result=TRUE
[0m
[0;32m
While: expr { "11" <= "10" } |result=FALSE
[0m
[1;34m
 === CGTS-905-Verify that Heat autoscaling still works after admin passwd change
[0m
sed -i "s/period: '60'/period: '120'/g" VMAutoScaling.yaml
Thu Feb  5 16:13:59 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [1;34m
 === become admin to change tenant password
[0m
source /etc/nova/openrc
Thu Feb  5 16:13:59 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ keystone user-password-update --pass tenantnew tenant1
Thu Feb  5 16:14:02 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ echo $?
0
Thu Feb  5 16:14:02 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m<echo $?
0[0m
[1;34m
 === change openrc.tenant1 file with updated password
[0m
sed -i "s/OS_PASSWORD=tenant1/OS_PASSWORD=tenantnew/g" /home/wrsroot/openrc.tenant1
Thu Feb  5 16:14:02 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === switch to tenant mode
[0m
source /home/wrsroot/openrc.tenant1
Thu Feb  5 16:14:02 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [1;34m
 Create STACK1 for manual migration
[0m
heat stack-create -f VMAutoScaling.yaml -P TenantUserId=49be897e674a4456af937371ecfa936d -P PrivateNetName=tenant1-mgmt-net -P Ins tanceName=guest1 -P FlavorName=vcpu4-1 -P ImageName=cgcs-guest -P CustomMeterName=vote -P KeyName=keypair-tenant1 STACK1
+--------------------------------------+------------+--------------------+----------------------+
| id                                   | stack_name | stack_status       | creation_time        |
+--------------------------------------+------------+--------------------+----------------------+
| ad2c0bea-5953-4628-8f92-cdcb7a430b9d | STACK1     | CREATE_IN_PROGRESS | 2015-02-05T16:14:04Z |
+--------------------------------------+------------+--------------------+----------------------+
Thu Feb  5 16:14:04 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [1;34m
 === wait and check if heat stack1 create_complete
[0m
heat stack-show STACK1
+----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| Property             | Value                                                                                                                         |
+----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| capabilities         | []                                                                                                                            |
| creation_time        | 2015-02-05T16:14:04Z                                                                                                          |
| description          | Creates a HEAT autoscaling stack and a VM instance                                                                            |
|                      | which is able to scale up/down the number of guest                                                                            |
|                      | vpcu's based on vcpu_util on the guest instance. Note:                                                                        |
|                      | This uses the HOT template                                                                                                    |
| disable_rollback     | True                                                                                                                          |
| id                   | ad2c0bea-5953-4628-8f92-cdcb7a430b9d                                                                                          |
| links                | http://128.224.150.189:8004/v1/a4e3a58f85e344c9b238f99045ee9e4e/stacks/STACK1/ad2c0bea-5953-4628-8f92-cdcb7a430b9d            |
| notification_topics  | []                                                                                                                            |
| outputs              | []                                                                                                                            |
| parameters           | {                                                                                                                             |
|                      |   "PrivateNetName": "tenant1-mgmt-net",                                                                                       |
|                      |   "InstanceName": "guest1",                                                                                                   |
|                      |   "AWS::StackName": "STACK1",                                                                                                 |
|                      |   "CustomMeterName": "vote",                                                                                                  |
|                      |   "FlavorName": "vcpu4-1",                                                                                                    |
|                      |   "KeyName": "keypair-tenant1",                                                                                               |
|                      |   "AWS::StackId": "arn:openstack:heat::a4e3a58f85e344c9b238f99045ee9e4e:stacks/STACK1/ad2c0bea-5953-4628-8f92-cdcb7a430b9d",  |
|                      |   "ImageName": "cgcs-guest",                                                                                                  |
|                      |   "MetricLowWaterMark": "5",                                                                                                  |
|                      |   "AWS::Region": "ap-southeast-1",                                                                                            |
|                      |   "TenantUserId": "49be897e674a4456af937371ecfa936d",                                                                         |
|                      |   "MetricHighWaterMark": "60"                                                                                                 |
|                      | }                                                                                                                             |
| stack_name           | STACK1                                                                                                                        |
| stack_status         | CREATE_COMPLETE                                                                                                               |
| stack_status_reason  | Stack create completed successfully                                                                                           |
| template_description | Creates a HEAT autoscaling stack and a VM instance                                                                            |
|                      | which is able to scale up/down the number of guest                                                                            |
|                      | vpcu's based on vcpu_util on the guest instance. Note:                                                                        |
|                      | This uses the HOT template                                                                                                    |
| timeout_mins         | 60                                                                                                                            |
| updated_time         | 2015-02-05T16:14:23Z                                                                                                          |
+----------------------+-------------------------------------------------------------------------------------------------------------------------------+
[0;32m<stack_status[0m
[0;32m<CREATE_COMPLETE[0m
[1;34m
 === lock compute where VM is present
[0m
Thu Feb  5 16:14:50 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [1;34m
 === get ID of each instance
[0m
nova list
+--------------------------------------+--------+--------+------------+-------------+---------------------------------+
| ID                                   | Name   | Status | Task State | Power State | Networks                        |
+--------------------------------------+--------+--------+------------+-------------+---------------------------------+
| 2639c4b8-6fca-4aab-a1fc-63636fb17d99 | guest1 | ACTIVE | -          | Running     | tenant1-mgmt-net=192.168.109.24 |
+--------------------------------------+--------+--------+------------+-------------+---------------------------------+
Thu Feb  5 16:14:51 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ nova list | grep guest1
| 2639c4b8-6fca-4aab-a1fc-63636fb17d99 | guest1 | ACTIVE | -          | Running     | tenant1-mgmt-net=192.168.109.24 |
Thu Feb  5 16:14:53 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:resource_id_vm1=2639c4b8-6fca-4aab-a1fc-63636fb17d99
[0m
vm-topology | grep 2639c4b8-6fca-4aab-a1fc-63636fb17d99
libnuma: Warning: Cannot parse sysfs meminfo (3)
| tenant1 | 2639c4b8-6fca-4aab-a1fc-63636fb17d99 | instance-00000075 | guest1 | compute-1 | active   | None       | Running     | -            | vcpu4-1 | pinned |        None | 1,4,4 |    512 |        0 | 3-6     |    yes     |
[0;32m<guest1[0m
Thu Feb  5 16:14:54 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:vm1_compute=compute-1
[0m
[1;34m
 === become admin to lock compute
[0m
source /etc/nova/openrc
Thu Feb  5 16:14:55 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === lock compute and check for migration 
[0m
system host-lock compute-1 --force
+-----------------+--------------------------------------+
| Property        | Value                                |
+-----------------+--------------------------------------+
| action          | none                                 |
| administrative  | unlocked                             |
| availability    | available                            |
| bm_ip           | None                                 |
| bm_mac          | None                                 |
| bm_type         | None                                 |
| bm_username     | None                                 |
| capabilities    | {}                                   |
| created_at      | 2015-02-04T02:52:10.822418+00:00     |
| cstatus         |                                      |
| hostname        | compute-1                            |
| iconfig_applied | 7f81ccb1-3ee7-4f55-91ad-7489dc761be4 |
| iconfig_fini    | None                                 |
| iconfig_target  | 7f81ccb1-3ee7-4f55-91ad-7489dc761be4 |
| id              | 4                                    |
| invprovision    | provisioned                          |
| location        | {}                                   |
| mgmt_ip         | 192.168.204.136                      |
| mgmt_mac        | 2c:44:fd:83:b7:5d                    |
| operational     | enabled                              |
| personality     | compute                              |
| reserved        | False                                |
| serialid        | None                                 |
| task            | Force Locking                        |
| updated_at      | 2015-02-05T16:12:10.235492+00:00     |
| uptime          | 42158                                |
| uuid            | 4d89a167-1a81-4365-87bd-bd87244c46d8 |
+-----------------+--------------------------------------+
Thu Feb  5 16:14:56 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === wait for compute to be locked
[0m
[0;32m
While: expr { "none" != "locked" } |result=TRUE
[0m
system host-list
+----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabled     | available    |
| 4  | compute-1    | compute     | unlocked       | enabled     | available    |
+----+--------------+-------------+----------------+-------------+--------------+
Thu Feb  5 16:14:57 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ system host-list
+----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabled     | available    |
| 4  | compute-1    | compute     | unlocked       | enabled     | available    |
+----+--------------+-------------+----------------+-------------+--------------+
Thu Feb  5 16:14:58 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:compute_state=unlocked
[0m
[0;32m
While: expr { "unlocked" != "locked" } |result=TRUE
[0m
system host-list
+----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabled     | available    |
| 4  | compute-1    | compute     | unlocked       | enabled     | available    |
+----+--------------+-------------+----------------+-------------+--------------+
Thu Feb  5 16:15:04 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:compute_state=unlocked
[0m
[0;32m
While: expr { "unlocked" != "locked" } |result=TRUE
[0m
system host-list
+----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabled     | available    |
| 4  | compute-1    | compute     | unlocked       | enabled     | available    |
+----+--------------+-------------+----------------+-------------+--------------+
Thu Feb  5 16:15:10 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:compute_state=unlocked
[0m
[0;32m
While: expr { "unlocked" != "locked" } |result=TRUE
[0m
system host-list
+----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabled     | available    |
| 4  | compute-1    | compute     | locked         | disabled    | online       |
+----+--------------+-------------+----------------+-------------+--------------+
Thu Feb  5 16:15:16 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:compute_state=locked
[0m
[0;32m
While: expr { "locked" != "locked" } |result=FALSE
[0m
system host-list
+----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabled     | available    |
| 4  | compute-1    | compute     | locked         | disabled    | online       |
+----+--------------+-------------+----------------+-------------+--------------+
Thu Feb  5 16:15:22 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === switch back to tenant
[0m
source ./openrc.tenant1
Thu Feb  5 16:15:22 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m

Setting Expect Timeout to: 20 

[0m
vm-topology | grep 2639c4b8-6fca-4aab-a1fc-63636fb17d99
libnuma: Warning: Cannot parse sysfs meminfo (3)
| tenant1 | 2639c4b8-6fca-4aab-a1fc-63636fb17d99 | instance-00000075 | guest1 | compute-0 | active   | None       | Running     | -            | vcpu4-1 | pinned |        None | 1,4,4 |    512 |        0 | 3-6     |    yes     |
[0;32m<guest1[0m
Thu Feb  5 16:15:24 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:vm1_compute=compute-0
[0m
[0;32m
If: expr { "compute-1" == "locked" } |then   ;red === $vm1 did not migrate correctly after compute lock|result=FALSE
[0m
[1;34m
 === get ID of each instance
[0m
nova list
+--------------------------------------+--------+--------+------------+-------------+---------------------------------+
| ID                                   | Name   | Status | Task State | Power State | Networks                        |
+--------------------------------------+--------+--------+------------+-------------+---------------------------------+
| 2639c4b8-6fca-4aab-a1fc-63636fb17d99 | guest1 | ACTIVE | -          | Running     | tenant1-mgmt-net=192.168.109.24 |
+--------------------------------------+--------+--------+------------+-------------+---------------------------------+
Thu Feb  5 16:15:25 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ nova list | grep $vm15
Usage: grep [OPTION]... PATTERN [FILE]...
Try `grep --help' for more information.
Thu Feb  5 16:15:26 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:resource_id_vm15=__NO_STRING_CAPTURED__
[0m
ceilometer sample-create -r 2639c4b8-6fca-4aab-a1fc-63636fb17d99 -m vote --meter-type gauge --meter-unit '%' --sample-volume 2 --r esource-metadata '{"display_name":"guest1"}'
+-------------------+--------------------------------------------+
| Property          | Value                                      |
+-------------------+--------------------------------------------+
| message_id        | 32757a66-ad52-11e4-90cc-2c44fd83b910       |
| name              | vote                                       |
| project_id        | a4e3a58f85e344c9b238f99045ee9e4e           |
| resource_id       | 2639c4b8-6fca-4aab-a1fc-63636fb17d99       |
| resource_metadata | {u'display_name': u'guest1'}               |
| source            | a4e3a58f85e344c9b238f99045ee9e4e:openstack |
| timestamp         | 2015-02-05T16:15:27.342749                 |
| type              | gauge                                      |
| unit              | %                                          |
| user_id           | 49be897e674a4456af937371ecfa936d           |
| volume            | 2.0                                        |
+-------------------+--------------------------------------------+
Thu Feb  5 16:15:27 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ ceilometer resource-show -r 2639c4b8-6fca-4aab-a1fc-63636fb17d99
+-------------+--------------------------------------------+
| Property    | Value                                      |
+-------------+--------------------------------------------+
| metadata    | {u'display_name': u'guest1'}               |
| project_id  | a4e3a58f85e344c9b238f99045ee9e4e           |
| resource_id | 2639c4b8-6fca-4aab-a1fc-63636fb17d99       |
| source      | a4e3a58f85e344c9b238f99045ee9e4e:openstack |
| user_id     | 49be897e674a4456af937371ecfa936d           |
+-------------+--------------------------------------------+
Thu Feb  5 16:15:28 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m<[0m
ceilometer alarm-list
[0;32m<alarm[0m
+--------------------------------------+----------------------------------+-------+---------+------------+-----------------------------+------------------+
| Alarm ID                             | Name                             | State | Enabled | Continuous | Alarm condition             | Time constraints |
+--------------------------------------+----------------------------------+-------+---------+------------+-----------------------------+------------------+
| 3ffe45b5-4d23-49da-8519-d0c816c060fa | STACK1-CPUAlarmHigh-43ojazp5mwop | ok    | True    | True       | vote > 60.0 during 1 x 120s | None             |
| b8c90b8b-a95e-4d52-a46e-7bec71210fd0 | STACK1-CPUAlarmLow-qks3i6wesskf  | alarm | True    | True       | vote < 5.0 during 1 x 120s  | None             |
+--------------------------------------+----------------------------------+-------+---------+------------+-----------------------------+------------------+
Thu Feb  5 16:15:59 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [1;34m
 === going in a loop to check guest1 reached minimum cpu vale 
[0m
nova show guest1
[0;32m<guest1[0m
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| Property                             | Value                                                                                                                            |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                                                                                           |
| OS-EXT-AZ:availability_zone          | nova                                                                                                                             |
| OS-EXT-STS:power_state               | 1                                                                                                                                |
| OS-EXT-STS:task_state                | -                                                                                                                                |
| OS-EXT-STS:vm_state                  | active                                                                                                                           |
| OS-SRV-USG:launched_at               | 2015-02-05T16:14:19.902181                                                                                                       |
| OS-SRV-USG:terminated_at             | -                                                                                                                                |
| accessIPv4                           |                                                                                                                                  |
| accessIPv6                           |                                                                                                                                  |
| config_drive                         |                                                                                                                                  |
| created                              | 2015-02-05T16:14:05Z                                                                                                             |
| extended                             | {"cpuset": 56, "numanode": 0, "siblings_cpuset": null}                                                                           |
| flavor                               | vcpu4-1 (5f0d748b-1c8b-4a70-1985-4d57e25ac137)                                                                                   |
| hostId                               | 5108074ec1b70826f368003ec6b5aedb0cdb9edb1e36064b0afbe7ad                                                                         |
| id                                   | 2639c4b8-6fca-4aab-a1fc-63636fb17d99                                                                                             |
| image                                | cgcs-guest (7aeabc04-8b05-44fa-bfe6-07d6dfbfc6ea)                                                                                |
| key_name                             | keypair-tenant1                                                                                                                  |
| metadata                             | {}                                                                                                                               |
| name                                 | guest1                                                                                                                           |
| nics                                 | {"nic1": {"vif_model": "virtio", "port_id": "03c7383c-2e3d-44a4-8467-1311f4c57afa", "network": "tenant1-mgmt-net", "mtu": 1500}} |
| os-extended-volumes:volumes_attached | []                                                                                                                               |
| pinned                               | True                                                                                                                             |
| progress                             | 0                                                                                                                                |
| server_group                         |                                                                                                                                  |
| status                               | ACTIVE                                                                                                                           |
| tenant1-mgmt-net network             | 192.168.109.24                                                                                                                   |
| tenant_id                            | a4e3a58f85e344c9b238f99045ee9e4e                                                                                                 |
| updated                              | 2015-02-05T16:15:56Z                                                                                                             |
| user_id                              | 49be897e674a4456af937371ecfa936d                                                                                                 |
| vcpus (min/cur/max)                  | [1, 3, 4]                                                                                                                        |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
Thu Feb  5 16:16:00 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:min_cpu=1
[0m
[0;32m
Assigned Var:cur_cpu=3
[0m
[0;32m
Assigned Var:max_cpu=4
[0m
[0;32m
While: expr { "3" != "1" } |result=TRUE
[0m
nova show guest1
[0;32m<guest1[0m
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| Property                             | Value                                                                                                                            |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                                                                                           |
| OS-EXT-AZ:availability_zone          | nova                                                                                                                             |
| OS-EXT-STS:power_state               | 1                                                                                                                                |
| OS-EXT-STS:task_state                | -                                                                                                                                |
| OS-EXT-STS:vm_state                  | active                                                                                                                           |
| OS-SRV-USG:launched_at               | 2015-02-05T16:14:19.902181                                                                                                       |
| OS-SRV-USG:terminated_at             | -                                                                                                                                |
| accessIPv4                           |                                                                                                                                  |
| accessIPv6                           |                                                                                                                                  |
| config_drive                         |                                                                                                                                  |
| created                              | 2015-02-05T16:14:05Z                                                                                                             |
| extended                             | {"cpuset": 56, "numanode": 0, "siblings_cpuset": null}                                                                           |
| flavor                               | vcpu4-1 (5f0d748b-1c8b-4a70-1985-4d57e25ac137)                                                                                   |
| hostId                               | 5108074ec1b70826f368003ec6b5aedb0cdb9edb1e36064b0afbe7ad                                                                         |
| id                                   | 2639c4b8-6fca-4aab-a1fc-63636fb17d99                                                                                             |
| image                                | cgcs-guest (7aeabc04-8b05-44fa-bfe6-07d6dfbfc6ea)                                                                                |
| key_name                             | keypair-tenant1                                                                                                                  |
| metadata                             | {}                                                                                                                               |
| name                                 | guest1                                                                                                                           |
| nics                                 | {"nic1": {"vif_model": "virtio", "port_id": "03c7383c-2e3d-44a4-8467-1311f4c57afa", "network": "tenant1-mgmt-net", "mtu": 1500}} |
| os-extended-volumes:volumes_attached | []                                                                                                                               |
| pinned                               | True                                                                                                                             |
| progress                             | 0                                                                                                                                |
| server_group                         |                                                                                                                                  |
| status                               | ACTIVE                                                                                                                           |
| tenant1-mgmt-net network             | 192.168.109.24                                                                                                                   |
| tenant_id                            | a4e3a58f85e344c9b238f99045ee9e4e                                                                                                 |
| updated                              | 2015-02-05T16:15:56Z                                                                                                             |
| user_id                              | 49be897e674a4456af937371ecfa936d                                                                                                 |
| vcpus (min/cur/max)                  | [1, 3, 4]                                                                                                                        |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
Thu Feb  5 16:16:02 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:cur_cpu=3
[0m
[1;34m
 === auto scaling down
[0m
[0;32m
If: expr { "3" == "1" } |then   %BREAK_REACHED_MIN_CPU20|result=FALSE
[0m
[0;32m
While: expr { "3" != "1" } |result=TRUE
[0m
nova show guest1
[0;32m<guest1[0m
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| Property                             | Value                                                                                                                            |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                                                                                           |
| OS-EXT-AZ:availability_zone          | nova                                                                                                                             |
| OS-EXT-STS:power_state               | 1                                                                                                                                |
| OS-EXT-STS:task_state                | -                                                                                                                                |
| OS-EXT-STS:vm_state                  | active                                                                                                                           |
| OS-SRV-USG:launched_at               | 2015-02-05T16:14:19.902181                                                                                                       |
| OS-SRV-USG:terminated_at             | -                                                                                                                                |
| accessIPv4                           |                                                                                                                                  |
| accessIPv6                           |                                                                                                                                  |
| config_drive                         |                                                                                                                                  |
| created                              | 2015-02-05T16:14:05Z                                                                                                             |
| extended                             | {"cpuset": 24, "numanode": 0, "siblings_cpuset": null}                                                                           |
| flavor                               | vcpu4-1 (5f0d748b-1c8b-4a70-1985-4d57e25ac137)                                                                                   |
| hostId                               | 5108074ec1b70826f368003ec6b5aedb0cdb9edb1e36064b0afbe7ad                                                                         |
| id                                   | 2639c4b8-6fca-4aab-a1fc-63636fb17d99                                                                                             |
| image                                | cgcs-guest (7aeabc04-8b05-44fa-bfe6-07d6dfbfc6ea)                                                                                |
| key_name                             | keypair-tenant1                                                                                                                  |
| metadata                             | {}                                                                                                                               |
| name                                 | guest1                                                                                                                           |
| nics                                 | {"nic1": {"vif_model": "virtio", "port_id": "03c7383c-2e3d-44a4-8467-1311f4c57afa", "network": "tenant1-mgmt-net", "mtu": 1500}} |
| os-extended-volumes:volumes_attached | []                                                                                                                               |
| pinned                               | True                                                                                                                             |
| progress                             | 0                                                                                                                                |
| server_group                         |                                                                                                                                  |
| status                               | ACTIVE                                                                                                                           |
| tenant1-mgmt-net network             | 192.168.109.24                                                                                                                   |
| tenant_id                            | a4e3a58f85e344c9b238f99045ee9e4e                                                                                                 |
| updated                              | 2015-02-05T16:16:26Z                                                                                                             |
| user_id                              | 49be897e674a4456af937371ecfa936d                                                                                                 |
| vcpus (min/cur/max)                  | [1, 2, 4]                                                                                                                        |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
Thu Feb  5 16:16:33 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:cur_cpu=2
[0m
[1;34m
 === auto scaling down
[0m
[0;32m
If: expr { "2" == "1" } |then   %BREAK_REACHED_MIN_CPU20|result=FALSE
[0m
[0;32m
While: expr { "2" != "1" } |result=TRUE
[0m
nova show guest1
[0;32m<guest1[0m
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| Property                             | Value                                                                                                                            |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                                                                                           |
| OS-EXT-AZ:availability_zone          | nova                                                                                                                             |
| OS-EXT-STS:power_state               | 1                                                                                                                                |
| OS-EXT-STS:task_state                | -                                                                                                                                |
| OS-EXT-STS:vm_state                  | active                                                                                                                           |
| OS-SRV-USG:launched_at               | 2015-02-05T16:14:19.902181                                                                                                       |
| OS-SRV-USG:terminated_at             | -                                                                                                                                |
| accessIPv4                           |                                                                                                                                  |
| accessIPv6                           |                                                                                                                                  |
| config_drive                         |                                                                                                                                  |
| created                              | 2015-02-05T16:14:05Z                                                                                                             |
| extended                             | {"cpuset": 8, "numanode": 0, "siblings_cpuset": null}                                                                            |
| flavor                               | vcpu4-1 (5f0d748b-1c8b-4a70-1985-4d57e25ac137)                                                                                   |
| hostId                               | 5108074ec1b70826f368003ec6b5aedb0cdb9edb1e36064b0afbe7ad                                                                         |
| id                                   | 2639c4b8-6fca-4aab-a1fc-63636fb17d99                                                                                             |
| image                                | cgcs-guest (7aeabc04-8b05-44fa-bfe6-07d6dfbfc6ea)                                                                                |
| key_name                             | keypair-tenant1                                                                                                                  |
| metadata                             | {}                                                                                                                               |
| name                                 | guest1                                                                                                                           |
| nics                                 | {"nic1": {"vif_model": "virtio", "port_id": "03c7383c-2e3d-44a4-8467-1311f4c57afa", "network": "tenant1-mgmt-net", "mtu": 1500}} |
| os-extended-volumes:volumes_attached | []                                                                                                                               |
| pinned                               | True                                                                                                                             |
| progress                             | 0                                                                                                                                |
| server_group                         |                                                                                                                                  |
| status                               | ACTIVE                                                                                                                           |
| tenant1-mgmt-net network             | 192.168.109.24                                                                                                                   |
| tenant_id                            | a4e3a58f85e344c9b238f99045ee9e4e                                                                                                 |
| updated                              | 2015-02-05T16:16:56Z                                                                                                             |
| user_id                              | 49be897e674a4456af937371ecfa936d                                                                                                 |
| vcpus (min/cur/max)                  | [1, 1, 4]                                                                                                                        |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
Thu Feb  5 16:17:05 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:cur_cpu=1
[0m
[1;34m
 === auto scaling down
[0m
[0;32m
If: expr { "1" == "1" } |then   %BREAK_REACHED_MIN_CPU20|result=TRUE
[0m

Jumping to label[0;32m:%BREAK_REACHED_MIN_CPU20
[0m
[1;34m
 === check if guest1 current cpu value reached minimum cpu value:1
[0m
nova show guest1
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| Property                             | Value                                                                                                                            |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                                                                                           |
| OS-EXT-AZ:availability_zone          | nova                                                                                                                             |
| OS-EXT-STS:power_state               | 1                                                                                                                                |
| OS-EXT-STS:task_state                | -                                                                                                                                |
| OS-EXT-STS:vm_state                  | active                                                                                                                           |
| OS-SRV-USG:launched_at               | 2015-02-05T16:14:19.902181                                                                                                       |
| OS-SRV-USG:terminated_at             | -                                                                                                                                |
| accessIPv4                           |                                                                                                                                  |
| accessIPv6                           |                                                                                                                                  |
| config_drive                         |                                                                                                                                  |
| created                              | 2015-02-05T16:14:05Z                                                                                                             |
| extended                             | {"cpuset": 8, "numanode": 0, "siblings_cpuset": null}                                                                            |
| flavor                               | vcpu4-1 (5f0d748b-1c8b-4a70-1985-4d57e25ac137)                                                                                   |
| hostId                               | 5108074ec1b70826f368003ec6b5aedb0cdb9edb1e36064b0afbe7ad                                                                         |
| id                                   | 2639c4b8-6fca-4aab-a1fc-63636fb17d99                                                                                             |
| image                                | cgcs-guest (7aeabc04-8b05-44fa-bfe6-07d6dfbfc6ea)                                                                                |
| key_name                             | keypair-tenant1                                                                                                                  |
| metadata                             | {}                                                                                                                               |
| name                                 | guest1                                                                                                                           |
| nics                                 | {"nic1": {"vif_model": "virtio", "port_id": "03c7383c-2e3d-44a4-8467-1311f4c57afa", "network": "tenant1-mgmt-net", "mtu": 1500}} |
| os-extended-volumes:volumes_attached | []                                                                                                                               |
| pinned                               | True                                                                                                                             |
| progress                             | 0                                                                                                                                |
| server_group                         |                                                                                                                                  |
| status                               | ACTIVE                                                                                                                           |
| tenant1-mgmt-net network             | 192.168.109.24                                                                                                                   |
| tenant_id                            | a4e3a58f85e344c9b238f99045ee9e4e                                                                                                 |
| updated                              | 2015-02-05T16:16:56Z                                                                                                             |
| user_id                              | 49be897e674a4456af937371ecfa936d                                                                                                 |
| vcpus (min/cur/max)                  | [1, 1, 4]                                                                                                                        |
+--------------------------------------+----------------------------------------------------------------------------[0;32m<min/cur/max[0m
------------------------------------------------------+
Thu Feb  5 16:17:37 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:min_cpu=1
[0m
[0;32m
Assigned Var:cur_cpu=1
[0m
[0;32m
Assigned Var:max_cpu=4
[0m
[0;32m
If: expr { "1" != "1" } |then   [|result=FALSE
[0m
ceilometer sample-create -r 2639c4b8-6fca-4aab-a1fc-63636fb17d99 -m vote --meter-type gauge --meter-unit '%' --sample-volume 90 -- resource-metadata '{"display_name":"guest1"}'
+-------------------+--------------------------------------------+
| Property          | Value                                      |
+-------------------+--------------------------------------------+
| message_id        | 80a3a1a4-ad52-11e4-90cc-2c44fd83b910       |
| name              | vote                                       |
| project_id        | a4e3a58f85e344c9b238f99045ee9e4e           |
| resource_id       | 2639c4b8-6fca-4aab-a1fc-63636fb17d99       |
| resource_metadata | {u'display_name': u'guest1'}               |
| source            | a4e3a58f85e344c9b238f99045ee9e4e:openstack |
| timestamp         | 2015-02-05T16:17:38.507510                 |
| type              | gauge                                      |
| unit              | %                                          |
| user_id           | 49be897e674a4456af937371ecfa936d           |
| volume            | 90.0                                       |
+-------------------+--------------------------------------------+
Thu Feb  5 16:17:38 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ ceilometer resource-show -r 2639c4b8-6fca-4aab-a1fc-63636fb17d99
+-------------+--------------------------------------------+
| Property    | Value                                      |
+-------------+--------------------------------------------+
| metadata    | {u'display_name': u'guest1'}               |
| project_id  | a4e3a58f85e344c9b238f99045ee9e4e           |
| resource_id | 2639c4b8-6fca-4aab-a1fc-63636fb17d99       |
| source      | a4e3a58f85e344c9b238f99045ee9e4e:openstack |
| user_id     | 49be897e674a4456af937371ecfa936d           |
+-------------+--------------------------------------------+
Thu Feb  5 16:17:39 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m<[0m
ceilometer alarm-list
[0;32m<alarm[0m
+--------------------------------------+----------------------------------+-------+---------+------------+-----------------------------+------------------+
| Alarm ID                             | Name                             | State | Enabled | Continuous | Alarm condition             | Time constraints |
+--------------------------------------+----------------------------------+-------+---------+------------+-----------------------------+------------------+
| 3ffe45b5-4d23-49da-8519-d0c816c060fa | STACK1-CPUAlarmHigh-43ojazp5mwop | alarm | True    | True       | vote > 60.0 during 1 x 120s | None             |
| b8c90b8b-a95e-4d52-a46e-7bec71210fd0 | STACK1-CPUAlarmLow-qks3i6wesskf  | ok    | True    | True       | vote < 5.0 during 1 x 120s  | None             |
+--------------------------------------+----------------------------------+-------+---------+------------+-----------------------------+------------------+
Thu Feb  5 16:18:10 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [1;34m
 === going in a loop to check guest1 reached maximum cpu vale 
[0m
nova show guest1
[0;32m<guest1[0m
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| Property                             | Value                                                                                                                            |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                                                                                           |
| OS-EXT-AZ:availability_zone          | nova                                                                                                                             |
| OS-EXT-STS:power_state               | 1                                                                                                                                |
| OS-EXT-STS:task_state                | -                                                                                                                                |
| OS-EXT-STS:vm_state                  | active                                                                                                                           |
| OS-SRV-USG:launched_at               | 2015-02-05T16:14:19.902181                                                                                                       |
| OS-SRV-USG:terminated_at             | -                                                                                                                                |
| accessIPv4                           |                                                                                                                                  |
| accessIPv6                           |                                                                                                                                  |
| config_drive                         |                                                                                                                                  |
| created                              | 2015-02-05T16:14:05Z                                                                                                             |
| extended                             | {"cpuset": 24, "numanode": 0, "siblings_cpuset": null}                                                                           |
| flavor                               | vcpu4-1 (5f0d748b-1c8b-4a70-1985-4d57e25ac137)                                                                                   |
| hostId                               | 5108074ec1b70826f368003ec6b5aedb0cdb9edb1e36064b0afbe7ad                                                                         |
| id                                   | 2639c4b8-6fca-4aab-a1fc-63636fb17d99                                                                                             |
| image                                | cgcs-guest (7aeabc04-8b05-44fa-bfe6-07d6dfbfc6ea)                                                                                |
| key_name                             | keypair-tenant1                                                                                                                  |
| metadata                             | {}                                                                                                                               |
| name                                 | guest1                                                                                                                           |
| nics                                 | {"nic1": {"vif_model": "virtio", "port_id": "03c7383c-2e3d-44a4-8467-1311f4c57afa", "network": "tenant1-mgmt-net", "mtu": 1500}} |
| os-extended-volumes:volumes_attached | []                                                                                                                               |
| pinned                               | True                                                                                                                             |
| progress                             | 0                                                                                                                                |
| server_group                         |                                                                                                                                  |
| status                               | ACTIVE                                                                                                                           |
| tenant1-mgmt-net network             | 192.168.109.24                                                                                                                   |
| tenant_id                            | a4e3a58f85e344c9b238f99045ee9e4e                                                                                                 |
| updated                              | 2015-02-05T16:17:56Z                                                                                                             |
| user_id                              | 49be897e674a4456af937371ecfa936d                                                                                                 |
| vcpus (min/cur/max)                  | [1, 2, 4]                                                                                                                        |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
Thu Feb  5 16:18:12 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:min_cpu=1
[0m
[0;32m
Assigned Var:cur_cpu=2
[0m
[0;32m
Assigned Var:max_cpu=4
[0m
[0;32m
While: expr { "2" != "4" } |result=TRUE
[0m
nova show guest1
[0;32m<guest1[0m
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| Property                             | Value                                                                                                                            |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                                                                                           |
| OS-EXT-AZ:availability_zone          | nova                                                                                                                             |
| OS-EXT-STS:power_state               | 1                                                                                                                                |
| OS-EXT-STS:task_state                | -                                                                                                                                |
| OS-EXT-STS:vm_state                  | active                                                                                                                           |
| OS-SRV-USG:launched_at               | 2015-02-05T16:14:19.902181                                                                                                       |
| OS-SRV-USG:terminated_at             | -                                                                                                                                |
| accessIPv4                           |                                                                                                                                  |
| accessIPv6                           |                                                                                                                                  |
| config_drive                         |                                                                                                                                  |
| created                              | 2015-02-05T16:14:05Z                                                                                                             |
| extended                             | {"cpuset": 24, "numanode": 0, "siblings_cpuset": null}                                                                           |
| flavor                               | vcpu4-1 (5f0d748b-1c8b-4a70-1985-4d57e25ac137)                                                                                   |
| hostId                               | 5108074ec1b70826f368003ec6b5aedb0cdb9edb1e36064b0afbe7ad                                                                         |
| id                                   | 2639c4b8-6fca-4aab-a1fc-63636fb17d99                                                                                             |
| image                                | cgcs-guest (7aeabc04-8b05-44fa-bfe6-07d6dfbfc6ea)                                                                                |
| key_name                             | keypair-tenant1                                                                                                                  |
| metadata                             | {}                                                                                                                               |
| name                                 | guest1                                                                                                                           |
| nics                                 | {"nic1": {"vif_model": "virtio", "port_id": "03c7383c-2e3d-44a4-8467-1311f4c57afa", "network": "tenant1-mgmt-net", "mtu": 1500}} |
| os-extended-volumes:volumes_attached | []                                                                                                                               |
| pinned                               | True                                                                                                                             |
| progress                             | 0                                                                                                                                |
| server_group                         |                                                                                                                                  |
| status                               | ACTIVE                                                                                                                           |
| tenant1-mgmt-net network             | 192.168.109.24                                                                                                                   |
| tenant_id                            | a4e3a58f85e344c9b238f99045ee9e4e                                                                                                 |
| updated                              | 2015-02-05T16:17:56Z                                                                                                             |
| user_id                              | 49be897e674a4456af937371ecfa936d                                                                                                 |
| vcpus (min/cur/max)                  | [1, 2, 4]                                                                                                                        |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
Thu Feb  5 16:18:13 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:cur_cpu=2
[0m
[1;34m
 === auto scaling up
[0m
[0;32m
If: expr { "2" == "4" } |then   %BREAK_REACHED_MAX_CPU20|result=FALSE
[0m
[0;32m
While: expr { "2" != "4" } |result=TRUE
[0m
nova show guest1
[0;32m<guest1[0m
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| Property                             | Value                                                                                                                            |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                                                                                           |
| OS-EXT-AZ:availability_zone          | nova                                                                                                                             |
| OS-EXT-STS:power_state               | 1                                                                                                                                |
| OS-EXT-STS:task_state                | -                                                                                                                                |
| OS-EXT-STS:vm_state                  | active                                                                                                                           |
| OS-SRV-USG:launched_at               | 2015-02-05T16:14:19.902181                                                                                                       |
| OS-SRV-USG:terminated_at             | -                                                                                                                                |
| accessIPv4                           |                                                                                                                                  |
| accessIPv6                           |                                                                                                                                  |
| config_drive                         |                                                                                                                                  |
| created                              | 2015-02-05T16:14:05Z                                                                                                             |
| extended                             | {"cpuset": 56, "numanode": 0, "siblings_cpuset": null}                                                                           |
| flavor                               | vcpu4-1 (5f0d748b-1c8b-4a70-1985-4d57e25ac137)                                                                                   |
| hostId                               | 5108074ec1b70826f368003ec6b5aedb0cdb9edb1e36064b0afbe7ad                                                                         |
| id                                   | 2639c4b8-6fca-4aab-a1fc-63636fb17d99                                                                                             |
| image                                | cgcs-guest (7aeabc04-8b05-44fa-bfe6-07d6dfbfc6ea)                                                                                |
| key_name                             | keypair-tenant1                                                                                                                  |
| metadata                             | {}                                                                                                                               |
| name                                 | guest1                                                                                                                           |
| nics                                 | {"nic1": {"vif_model": "virtio", "port_id": "03c7383c-2e3d-44a4-8467-1311f4c57afa", "network": "tenant1-mgmt-net", "mtu": 1500}} |
| os-extended-volumes:volumes_attached | []                                                                                                                               |
| pinned                               | True                                                                                                                             |
| progress                             | 0                                                                                                                                |
| server_group                         |                                                                                                                                  |
| status                               | ACTIVE                                                                                                                           |
| tenant1-mgmt-net network             | 192.168.109.24                                                                                                                   |
| tenant_id                            | a4e3a58f85e344c9b238f99045ee9e4e                                                                                                 |
| updated                              | 2015-02-05T16:18:26Z                                                                                                             |
| user_id                              | 49be897e674a4456af937371ecfa936d                                                                                                 |
| vcpus (min/cur/max)                  | [1, 3, 4]                                                                                                                        |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
Thu Feb  5 16:18:45 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:cur_cpu=3
[0m
[1;34m
 === auto scaling up
[0m
[0;32m
If: expr { "3" == "4" } |then   %BREAK_REACHED_MAX_CPU20|result=FALSE
[0m
[0;32m
While: expr { "3" != "4" } |result=TRUE
[0m
nova show guest1
[0;32m<guest1[0m
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| Property                             | Value                                                                                                                            |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                                                                                           |
| OS-EXT-AZ:availability_zone          | nova                                                                                                                             |
| OS-EXT-STS:power_state               | 1                                                                                                                                |
| OS-EXT-STS:task_state                | -                                                                                                                                |
| OS-EXT-STS:vm_state                  | active                                                                                                                           |
| OS-SRV-USG:launched_at               | 2015-02-05T16:14:19.902181                                                                                                       |
| OS-SRV-USG:terminated_at             | -                                                                                                                                |
| accessIPv4                           |                                                                                                                                  |
| accessIPv6                           |                                                                                                                                  |
| config_drive                         |                                                                                                                                  |
| created                              | 2015-02-05T16:14:05Z                                                                                                             |
| extended                             | {"cpuset": 120, "numanode": 0, "siblings_cpuset": null}                                                                          |
| flavor                               | vcpu4-1 (5f0d748b-1c8b-4a70-1985-4d57e25ac137)                                                                                   |
| hostId                               | 5108074ec1b70826f368003ec6b5aedb0cdb9edb1e36064b0afbe7ad                                                                         |
| id                                   | 2639c4b8-6fca-4aab-a1fc-63636fb17d99                                                                                             |
| image                                | cgcs-guest (7aeabc04-8b05-44fa-bfe6-07d6dfbfc6ea)                                                                                |
| key_name                             | keypair-tenant1                                                                                                                  |
| metadata                             | {}                                                                                                                               |
| name                                 | guest1                                                                                                                           |
| nics                                 | {"nic1": {"vif_model": "virtio", "port_id": "03c7383c-2e3d-44a4-8467-1311f4c57afa", "network": "tenant1-mgmt-net", "mtu": 1500}} |
| os-extended-volumes:volumes_attached | []                                                                                                                               |
| pinned                               | True                                                                                                                             |
| progress                             | 0                                                                                                                                |
| server_group                         |                                                                                                                                  |
| status                               | ACTIVE                                                                                                                           |
| tenant1-mgmt-net network             | 192.168.109.24                                                                                                                   |
| tenant_id                            | a4e3a58f85e344c9b238f99045ee9e4e                                                                                                 |
| updated                              | 2015-02-05T16:18:56Z                                                                                                             |
| user_id                              | 49be897e674a4456af937371ecfa936d                                                                                                 |
| vcpus (min/cur/max)                  | [1, 4, 4]                                                                                                                        |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
Thu Feb  5 16:19:16 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:cur_cpu=4
[0m
[1;34m
 === auto scaling up
[0m
[0;32m
If: expr { "4" == "4" } |then   %BREAK_REACHED_MAX_CPU20|result=TRUE
[0m

Jumping to label[0;32m:%BREAK_REACHED_MAX_CPU20
[0m
[1;34m
 === check if guest1 current cpu value reached maximum cpu value:4
[0m
nova show guest1
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| Property                             | Value                                                                                                                            |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                                                                                           |
| OS-EXT-AZ:availability_zone          | nova                                                                                                                             |
| OS-EXT-STS:power_state               | 1                                                                                                                                |
| OS-EXT-STS:task_state                | -                                                                                                                                |
| OS-EXT-STS:vm_state                  | active                                                                                                                           |
| OS-SRV-USG:launched_at               | 2015-02-05T16:14:19.902181                                                                                                       |
| OS-SRV-USG:terminated_at             | -                                                                                                                                |
| accessIPv4                           |                                                                                                                                  |
| accessIPv6                           |                                                                                                                                  |
| config_drive                         |                                                                                                                                  |
| created                              | 2015-02-05T16:14:05Z                                                                                                             |
| extended                             | {"cpuset": 120, "numanode": 0, "siblings_cpuset": null}                                                                          |
| flavor                               | vcpu4-1 (5f0d748b-1c8b-4a70-1985-4d57e25ac137)                                                                                   |
| hostId                               | 5108074ec1b70826f368003ec6b5aedb0cdb9edb1e36064b0afbe7ad                                                                         |
| id                                   | 2639c4b8-6fca-4aab-a1fc-63636fb17d99                                                                                             |
| image                                | cgcs-guest (7aeabc04-8b05-44fa-bfe6-07d6dfbfc6ea)                                                                                |
| key_name                             | keypair-tenant1                                                                                                                  |
| metadata                             | {}                                                                                                                               |
| name                                 | guest1                                                                                                                           |
| nics                                 | {"nic1": {"vif_model": "virtio", "port_id": "03c7383c-2e3d-44a4-8467-1311f4c57afa", "network": "tenant1-mgmt-net", "mtu": 1500}} |
| os-extended-volumes:volumes_attached | []                                                                                                                               |
| pinned                               | True                                                                                                                             |
| progress                             | 0                                                                                                                                |
| server_group                         |                                                                                                                                  |
| status                               | ACTIVE                                                                                                                           |
| tenant1-mgmt-net network             | 192.168.109.24                                                                                                                   |
| tenant_id                            | a4e3a58f85e344c9b238f99045ee9e4e                                                                                                 |
| updated                              | 2015-02-05T16:18:56Z                                                                                                             |
| user_id                              | 49be897e674a4456af937371ecfa936d                                                                                                 |
| vcpus (min/cur/max)                  | [1, 4, 4]                                                                                                                        |
+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------+
[0;32m<min/cur/max[0m
Thu Feb  5 16:19:48 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m
Assigned Var:min_cpu=1
[0m
[0;32m
Assigned Var:cur_cpu=4
[0m
[0;32m
Assigned Var:max_cpu=4
[0m
[0;32m
If: expr { "4" != "4" } |then   [|result=FALSE
[0m
[1;34m
 === become admin to lock compute
[0m
source /etc/nova/openrc
Thu Feb  5 16:19:48 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === lock compute and check for migration 
[0m
system host-unlock compute-1 
+-----------------+--------------------------------------+
| Property        | Value                                |
+-----------------+--------------------------------------+
| action          | none                                 |
| administrative  | locked                               |
| availability    | online                               |
| bm_ip           | None                                 |
| bm_mac          | None                                 |
| bm_type         | None                                 |
| bm_username     | None                                 |
| capabilities    | {}                                   |
| created_at      | 2015-02-04T02:52:10.822418+00:00     |
| cstatus         |                                      |
| hostname        | compute-1                            |
| iconfig_applied | 7f81ccb1-3ee7-4f55-91ad-7489dc761be4 |
| iconfig_fini    | None                                 |
| iconfig_target  | 7f81ccb1-3ee7-4f55-91ad-7489dc761be4 |
| id              | 4                                    |
| invprovision    | provisioned                          |
| location        | {}                                   |
| mgmt_ip         | 192.168.204.136                      |
| mgmt_mac        | 2c:44:fd:83:b7:5d                    |
| operational     | disabled                             |
| personality     | compute                              |
| reserved        | False                                |
| serialid        | None                                 |
| task            | Unlocking                            |
| updated_at      | 2015-02-05T16:17:55.409552+00:00     |
| uptime          | 42508                                |
| uuid            | 4d89a167-1a81-4365-87bd-bd87244c46d8 |
+-----------------+--------------------------------------+
Thu Feb  5 16:19:50 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ system host-list
+----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabled     | available    |
| 4  | compute-1    | compute     | unlocked       | disabled    | online       |
+----+--------------+-------------+----------------+-------------+--------------+
[0;32m<compute-1[0m
[1;34m
 === wait for compute to be unlocked
[0m
[0;32m
While: expr { "none" != "unlocked" } |result=TRUE
[0m
Thu Feb  5 16:19:51 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ system host-list
+----+--------------+-------------+----------------+-------------+--------------+
| id | hostname     | personality | administrative | operational | availability |
+----+--------------+-------------+----------------+-------------+--------------+
| 1  | controller-0 | controller  | unlocked       | enabled     | available    |
| 2  | controller-1 | controller  | unlocked       | enabled     | available    |
| 3  | compute-0    | compute     | unlocked       | enabled     | available    |
| 4  | compute-1    | compute     | unlocked       | disabled    | online       |
+----+--------------+-------------+----------------+-------------+--------------+
Thu Feb  5 16:19:52 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m
Assigned Var:compute_state=unlocked
[0m
[0;32m
While: expr { "unlocked" != "unlocked" } |result=FALSE
[0m
[1;34m
 === become admin to revert tenant password
[0m
source /etc/nova/openrc
Thu Feb  5 16:19:57 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ keystone user-password-update --pass tenant1 tenant1
Thu Feb  5 16:19:58 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ echo $?
0
Thu Feb  5 16:19:58 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [0;32m<echo $?
0[0m
[1;34m
 === change openrc.tenant1 file with updated password
[0m
sed -i "s/PASSWORD=tenantnew/PASSWORD=tenant1/g" /home/wrsroot/openrc.tenant1
Thu Feb  5 16:19:58 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === switch to tenant mode
[0m
source /home/wrsroot/openrc.tenant1
Thu Feb  5 16:19:58 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [1;34m
 === become admin to clean up
[0m
[1;34m
cleanup all setup created for this testcase
[0m
[1;34m
 === delete the stack created
[0m
source /etc/nova/openrc
Thu Feb  5 16:19:59 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === delete the flavor created 
[0m
nova flavor-list
+--------------------------------------+---------------------------------------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
| ID                                   | Name                                  | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | VCPU_Model  |
+--------------------------------------+---------------------------------------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
| 1                                    | m1.tiny                               | 512       | 1    | 0         |      | 1     | 1.0         | True      | -           |
| 100                                  | wrl5.dpdk.big                         | 4096      | 0    | 0         |      | 3     | 1.0         | True      | -           |
| 101                                  | wrl5.dpdk.small                       | 512       | 0    | 0         |      | 2     | 1.0         | True      | -           |
| 2                                    | m1.small                              | 2048      | 20   | 0         |      | 1     | 1.0         | True      | -           |
| 200                                  | wrl5.dpdk.small.heartbeat             | 512       | 0    | 0         |      | 2     | 1.0         | True      | -           |
| 201                                  | wrl5.dpdk.big.heartbeat               | 4096      | 0    | 0         |      | 3     | 1.0         | True      | -           |
| 233                                  | wrl5.dpdk.big.heartbeat.pinToMgmtCore | 4096      | 0    | 0         |      | 3     | 1.0         | True      | -           |
| 28aa6811-d4b8-41f5-994c-db017e81511d | small                                 | 512       | 1    | 0         |      | 1     | 1.0         | True      | -           |
| 41a0c6b2-5ce1-4ff2-9d73-2a6201847cc0 | medium.dpdk                           | 512       | 1    | 0         |      | 2     | 1.0         | True      | SandyBridge |
| 5f0d748b-1c8b-4a70-1985-4d57e25ac137 | vcpu4-1                               | 512       | 0    | 0         |      | 4     | 1.0         | True      | -           |
| d3b37dcf-227b-419d-9385-7623f08b65fd | test_flavor_1431620018                | 1024      | 0    | 0         |      | 1     | 1.0         | True      | -           |
| db9b37f5-cba5-1985-a264-a6c1375a4ff7 | vcpu5-2                               | 512       | 0    | 0         |      | 5     | 1.0         | True      | -           |
| f345d0a0-54be-4ab6-a9db-ddcff6524bcb | small.float                           | 512       | 1    | 0         |      | 1     | 1.0         | True      | -           |
+--------------------------------------+---------------------------------------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
Thu Feb  5 16:20:00 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ nova flavor-delete vcpu4-1
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
| ID                                   | Name    | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | VCPU_Model |
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
| 5f0d748b-1c8b-4a70-1985-4d57e25ac137 | vcpu4-1 | 512       | 0    | 0         |      | 4     | 1.0         | True      | -          |
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
Thu Feb  5 16:20:01 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ nova flavor-delete vcpu5-2
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
| ID                                   | Name    | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | VCPU_Model |
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
| db9b37f5-cba5-1985-a264-a6c1375a4ff7 | vcpu5-2 | 512       | 0    | 0         |      | 5     | 1.0         | True      | -          |
+--------------------------------------+---------+-----------+------+-----------+------+-------+-------------+-----------+------------+
Thu Feb  5 16:20:02 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ nova flavor-list
+--------------------------------------+---------------------------------------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
| ID                                   | Name                                  | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | VCPU_Model  |
+--------------------------------------+---------------------------------------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
| 1                                    | m1.tiny                               | 512       | 1    | 0         |      | 1     | 1.0         | True      | -           |
| 100                                  | wrl5.dpdk.big                         | 4096      | 0    | 0         |      | 3     | 1.0         | True      | -           |
| 101                                  | wrl5.dpdk.small                       | 512       | 0    | 0         |      | 2     | 1.0         | True      | -           |
| 2                                    | m1.small                              | 2048      | 20   | 0         |      | 1     | 1.0         | True      | -           |
| 200                                  | wrl5.dpdk.small.heartbeat             | 512       | 0    | 0         |      | 2     | 1.0         | True      | -           |
| 201                                  | wrl5.dpdk.big.heartbeat               | 4096      | 0    | 0         |      | 3     | 1.0         | True      | -           |
| 233                                  | wrl5.dpdk.big.heartbeat.pinToMgmtCore | 4096      | 0    | 0         |      | 3     | 1.0         | True      | -           |
| 28aa6811-d4b8-41f5-994c-db017e81511d | small                                 | 512       | 1    | 0         |      | 1     | 1.0         | True      | -           |
| 41a0c6b2-5ce1-4ff2-9d73-2a6201847cc0 | medium.dpdk                           | 512       | 1    | 0         |      | 2     | 1.0         | True      | SandyBridge |
| d3b37dcf-227b-419d-9385-7623f08b65fd | test_flavor_1431620018                | 1024      | 0    | 0         |      | 1     | 1.0         | True      | -           |
| f345d0a0-54be-4ab6-a9db-ddcff6524bcb | small.float                           | 512       | 1    | 0         |      | 1     | 1.0         | True      | -           |
+--------------------------------------+---------------------------------------+-----------+------+-----------+------+-------+-------------+-----------+-------------+
Thu Feb  5 16:20:03 UTC 2015
[wrsroot@controller-0 ~(keystone_admin)]$ [1;34m
 === become tenant to clean up stack
[0m
source /home/wrsroot/openrc.tenant1
Thu Feb  5 16:20:03 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [1;34m
 === delete heat stack created
[0m
heat stack-delete STACK1 
+--------------------------------------+------------+--------------------+----------------------+
| id                                   | stack_name | stack_status       | creation_time        |
+--------------------------------------+------------+--------------------+----------------------+
| ad2c0bea-5953-4628-8f92-cdcb7a430b9d | STACK1     | DELETE_IN_PROGRESS | 2015-02-05T16:14:04Z |
+--------------------------------------+------------+--------------------+----------------------+
Thu Feb  5 16:20:04 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ heat stack-list
+----+------------+--------------+---------------+
| id | stack_name | stack_status | creation_time |
+----+------------+--------------+---------------+
+----+------------+--------------+---------------+
Thu Feb  5 16:20:35 UTC 2015
[wrsroot@controller-0 ~(keystone_tenant1)]$ [0;32m

##Overall Result: PASS 

[0m
